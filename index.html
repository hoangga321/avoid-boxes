<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Avoid Boxes ‚Äì Funny Edition</title>
  <link rel="stylesheet" href="css/style.css" />
  <!-- Game UI fonts (VN + KR ready) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jua&family=Be+Vietnam+Pro:wght@400;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
  <div id="app">
    <header class="topbar">
      <!-- NEW: b·ªçc logo + mascot (kh√¥ng ph√° v·ªã tr√≠ c≈©) -->
      <div class="logo-hero">
        <h1 class="logo" id="gameLogo" data-i18n="app.title"></h1>

        <!-- Mascot Yakuza ng·ªìi ch·ªâ v√†o logo (SVG placeholder). 
             N·∫øu b·∫°n c√≥ PNG/SVG ri√™ng, thay <svg> b·∫±ng <img class="yakuza-img" src="assets/skins/yakuza_pose_point.png"> -->
        <figure class="logo-mascot" aria-hidden="true">
          <svg viewBox="0 0 220 180" width="220" height="180" class="yakuza-svg" role="img">
            <!-- gh·∫ø -->
            <rect x="60" y="120" width="90" height="10" rx="5" fill="#3a3a3a"/>
            <!-- ch√¢n g·∫≠p -->
            <path d="M95 120 Q90 135 100 145 L110 145 Q105 130 115 120 Z" fill="#1e293b"/>
            <path d="M125 120 Q120 135 130 145 L140 145 Q135 130 145 120 Z" fill="#1e293b"/>
            <!-- th√¢n √°o vest ƒëen -->
            <path d="M85 70 L140 70 L150 115 L75 115 Z" fill="#111"/>
            <!-- c√† v·∫°t ƒë·ªè -->
            <path d="M112 70 L116 70 L118 95 L110 95 Z" fill="#b91c1c"/>
            <!-- ƒë·∫ßu + t√≥c -->
            <circle cx="112" cy="52" r="18" fill="#f8d2b1"/>
            <path d="M94 46 Q112 28 130 46 L124 40 Q112 34 100 40 Z" fill="#111"/>
            <!-- k√≠nh ƒëen -->
            <rect x="100" y="48" width="12" height="6" rx="2" fill="#0f172a"/>
            <rect x="114" y="48" width="12" height="6" rx="2" fill="#0f172a"/>
            <rect x="112" y="50" width="4" height="2" fill="#0f172a"/>
            <!-- g·∫≠y b√≥ng ch√†y -->
            <rect x="60" y="92" width="58" height="6" rx="3" fill="#8b5e34" transform="rotate(-10 60 92)"/>
            <!-- tay tr√°i ƒë·∫∑t tr√™n g·∫≠y -->
            <circle cx="68" cy="94" r="6" fill="#f8d2b1"/>
            <!-- tay ph·∫£i (c√≥ kh·ªõp xoay ƒë·ªÉ ‚Äúch·ªâ‚Äù) -->
            <g class="right-arm" transform="translate(145,88)">
              <rect x="-6" y="-2" width="26" height="6" rx="3" fill="#111"/>
              <g class="forearm" transform="translate(20,0)">
                <rect x="0" y="-2" width="26" height="6" rx="3" fill="#111"/>
                <circle cx="28" cy="1" r="4" fill="#f8d2b1"/>
              </g>
            </g>
          </svg>
        </figure>
      </div>

      <nav class="top-actions">
        <!-- NEW: toggle panel tr√°i -->
        <button id="btnReset" class="btn-reset" title="Reset missions/coins/xp">Reset Mission</button>

        <select id="langSelect" class="select" aria-label="Language">
          <option value="en">English</option>
          <option value="ko">ÌïúÍµ≠Ïñ¥</option>
        </select>

        <select id="stageSelect" class="select" aria-label="Stage">
          <option value="city">City</option>
          <option value="noodle">Noodle</option>
          <option value="gym">Gym</option>
        </select>

        <button id="btnSettings" class="btn" title="Settings" data-i18n-title="header.settings_title">‚öôÔ∏è</button>
        <button id="btnMute" class="btn" aria-pressed="false" title="Sound" data-i18n-title="header.sound_title">üîä</button>
      </nav>
    </header>

    <div id="scaleRoot" class="scale-root">
      <main class="main-grid">
        <!-- LEFT: HOW-TO -->
        <aside class="left-rail">
          <h2 class="rail-title">
            <span class="ico book" aria-hidden="true"></span>
            <span id="howtoTitle">How to Play</span>
          </h2>
          <div id="howtoBody" class="howto"></div>
        </aside>

        <!-- CENTER: GAME -->
        <section class="center-rail">
          <div class="game-stage">
            <canvas id="gameCanvas" width="540" height="720" tabindex="0"></canvas>

            <!-- HUD -->
            <div class="hud top-left">
              <div id="uiTime"  class="pill">‚Äî</div>
              <div id="uiScore" class="pill">‚Äî</div>
              <div id="uiBest"  class="pill ghost">‚Äî</div>
            </div>

            <div id="gameoverStats"></div>
            <button id="btnPause" class="btn circle top-right" aria-label="Pause" data-i18n-aria="buttons.pause_aria">‚è∏</button>

            <!-- Combo bar -->
            <div id="comboWrap" class="combo hidden">
              <div class="combo-bar"><span id="comboFill"></span></div>
              <div class="combo-label">COMBO <span id="comboCount">0</span> ‚Ä¢ <span id="comboMult">1.00x</span></div>
            </div>

            <!-- Toast -->
            <div id="toast" class="toast hidden" data-i18n="toast.incoming"></div>

            <!-- Overlays -->
            <div id="overlayStart" class="overlay show">
              <h2 data-i18n="start.title"></h2>
              <p  data-i18n="start.prompt"></p>
              <button id="btnPlay" class="btn big" data-i18n="start.play"></button>
            </div>

            <div id="overlayPause" class="overlay hidden">
              <h2 data-i18n="pause.title"></h2>
              <div class="row">
                <button id="btnResume"   class="btn" data-i18n="pause.resume"></button>
                <button id="btnRestart1" class="btn" data-i18n="pause.restart"></button>
              </div>
            </div>

            <div id="overlayCountdown" class="overlay hidden">
              <h2 id="countNum">3</h2>
            </div>

            <div id="overlayGameOver" class="overlay hidden">
              <h2 data-i18n="gameover.title"></h2>
              <p id="finalResult">‚Äî</p>
              <button id="btnRestart2" class="btn big" data-i18n="gameover.restart"></button>
            </div>

            <!-- Touch zones -->
            <div class="touch left"  id="touchLeft"  aria-hidden="true"></div>
            <div class="touch right" id="touchRight" aria-hidden="true"></div>
          </div>
        </section>

        <!-- RIGHT: PANELS -->
        <aside class="right-rail">
          <section class="panel" id="panelMissions">
            <h2 class="panel-title"><span class="ico flag"></span><span data-i18n="panel.missions_title">Today's Missions</span></h2>
            <ul id="missionsList"></ul>
          </section>

          <section class="panel" id="panelShop">
            <h2 class="panel-title"><span class="ico cart"></span><span data-i18n="panel.shop_title">Shop</span></h2>
            <!-- n·ªôi dung shop hi·ªán c√≥ -->
          </section>
        </aside>
      </main>
    </div>
  </div>

  <!-- Settings modal -->
  <div id="settingsOverlay" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <div class="modal-card">
      <h3 id="settingsTitle" data-i18n="settings.title">Settings</h3>
      <label class="slider">
        <span data-i18n="settings.sfx"></span>
        <input id="sfxRange" type="range" min="0" max="100" step="1">
        <span id="sfxVal">90%</span>
      </label>
      <label class="slider">
        <span data-i18n="settings.music"></span>
        <input id="musicRange" type="range" min="0" max="100" step="1">
        <span id="musicVal">30%</span>
      </label>
      <div class="row">
        <button id="btnCloseSettings" class="btn" data-i18n="settings.close"></button>
      </div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
